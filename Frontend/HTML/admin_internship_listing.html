<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="admin_internship_listing_styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internship Listings | UniCareerHub</title>
    <link rel="stylesheet" href="job_listing_styles.css">
</head>
<body>
    <div class="container">
        <h2>Internship Listings</h2>
        
        <input type="text" id="search" class="search-bar" placeholder="Search by company, position or description" onkeyup="filterJobs()">
        
        <ul id="jobList" class="job-list"></ul>
        
        <h3>Post a New Internship</h3>
        <input type="text" id="company" placeholder="Company Name">
        <input type="text" id="position" placeholder="Job Position">
        <textarea id="description" placeholder="Job Description"></textarea>
        <input type="text" id="applyLink" placeholder="Application Link (URL)">
        <button class="submit-btn" onclick="addJob()">Post Job</button>
    </div>
    
    <script>
        let jobs = [];
        let editingIndex = -1;
        
        function addJob() {
            const company = document.getElementById('company').value;
            const position = document.getElementById('position').value;
            const description = document.getElementById('description').value;
            const applyLink = document.getElementById('applyLink').value;
            const datePosted = new Date().toISOString().split('T')[0];
            
            if (company && position && description && applyLink) {
                if (editingIndex >= 0) {
                    // Update existing job
                    jobs[editingIndex] = { company, position, description, applyLink, datePosted: jobs[editingIndex].datePosted };
                    editingIndex = -1;
                } else {
                    // Add new job
                    jobs.push({ company, position, description, applyLink, datePosted });
                }
                sortJobs();
                displayJobs();
                // Clear form fields
                document.getElementById('company').value = '';
                document.getElementById('position').value = '';
                document.getElementById('description').value = '';
                document.getElementById('applyLink').value = '';
                document.querySelector('.submit-btn').textContent = 'Post Job';
            } else {
                alert('Please fill all fields before posting a job.');
            }
        }
        
        function displayJobs() {
            const jobList = document.getElementById('jobList');
            jobList.innerHTML = '';
            jobs.forEach((job, index) => {
                jobList.innerHTML += `<li class="job-item" data-company="${job.company}" data-position="${job.position}" data-description="${job.description}">
                    <div class="job-content">
                        <strong>${job.company}</strong> - ${job.position} <br>
                        <small>Posted: ${job.datePosted}</small>
                        <p class="job-description">${job.description}</p>
                        <a href="${job.applyLink}" target="_blank" class="apply-link">Apply Now</a>
                    </div>
                    <div class="job-actions">
                        <button class="edit-btn" onclick="editJob(${index})">Edit</button>
                        <button class="delete-btn" onclick="deleteJob(${index})">Delete</button>
                    </div>
                </li>`;
            });
        }
        
        function editJob(index) {
            const job = jobs[index];
            document.getElementById('company').value = job.company;
            document.getElementById('position').value = job.position;
            document.getElementById('description').value = job.description;
            document.getElementById('applyLink').value = job.applyLink;
            editingIndex = index;
            document.querySelector('.submit-btn').textContent = 'Update Job';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function deleteJob(index) {
            if (confirm('Are you sure you want to delete this job listing?')) {
                jobs.splice(index, 1);
                displayJobs();
            }
        }
        
        function filterJobs() {
            const query = document.getElementById('search').value.toLowerCase();
            document.querySelectorAll('.job-item').forEach(item => {
                const text = (
                    item.dataset.company.toLowerCase() + ' ' + 
                    item.dataset.position.toLowerCase() + ' ' + 
                    item.dataset.description.toLowerCase()
                );
                item.style.display = text.includes(query) ? 'block' : 'none';
            });
        }
        
        function sortJobs() {
            jobs.sort((a, b) => new Date(b.datePosted) - new Date(a.datePosted));
        }
    </script>
</body>
</html>
